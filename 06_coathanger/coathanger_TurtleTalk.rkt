(shape: coathanger (dia slopeL bottomL pix piy)
 (script:
  (sweep:
   (circle #:plane plane-XZ #:d dia)
   (named: tr (turtle:
    (right 45)
    (forward 20)
    (right 90)
    (tag! p1)
    (arc 40 (+ pix p1.x) (+ piy p1.y) 0)
    (tag! pe)
    (right 90)
    (forward 20)
    (left 45)
    (forward 20)
    (tag! p2)
    (left 75)
    (forward slopeL)
    (tag! p3)
    (right 75)
    (arc 40 (- p3.x 20) (- p3.y 20) 0)
    (right 90)
    (forward bottomL)
    (tag! p4)
    (right 90)
    (arc 40 (+ p4.x 20) (+ p4.y 20) 0)
    (right 75)
    (forward slopeL)
    (tag! p5)))))
 (constraints:
  (assert: (= pix (/ (+ tr.p1.x tr.pe.x) 2)))
  (assert: (= piy (/ (+ tr.p1.y tr.pe.y) 2)))
  (assert: (= (- tr.p2.y tr.p3.y) 220))
  (assert: (= tr.p5.y (+ tr.p2.y dia)))))

(print: (coathanger #:dia 6) "coathanger.stl")
